# 奶狗快跑 - 精准社交匹配小程序

## 项目简介

"奶狗快跑"是一款聚焦18-25岁男大学生与28-38岁有稳定经济基础女性的垂直社交匹配小程序，通过科学问卷与智能算法降低社交试错成本，促进优质社交链接。

## 核心功能

### MVP核心功能（最高优先级）

1. **账号与实名认证**
   - 微信登录 + 手机号绑定
   - 男生：学生证 + 人脸核验
   - 女生：身份证 + 年龄核验（资产证明可选）

2. **多维问卷与画像**
   - 基础信息、兴趣偏好、社交需求、价值观、外貌偏好
   - 用户画像计算与标签落库

3. **匹配与双向选择**
   - 基础筛选（地域/年龄/身份）+ 加权匹配分
   - 系统候选 → 单向喜欢 → 互相喜欢 → 匹配成功

4. **聊天与风控**
   - 站内聊天
   - AI内容审核（敏感词、联系方式拦截）
   - 违规上报与拉黑

5. **支付解锁**
   - 微信支付（单次解锁、订阅会员）
   - 双向确认后展示微信号

6. **合规与隐私**
   - 用户注销、数据拉取
   - 加密存储、最小化收集
   - 操作留痕审计

### 次优先功能（留存与变现增强）

- 活动运营（活动列表、报名、签到、反馈）
- AI外貌评分（仅内部使用）
- 增长与留存（新手引导、推送、匹配频率控制）

## 技术架构

### 前端
- **框架**: 微信小程序原生开发
- **语言**: TypeScript
- **UI**: 自定义组件 + WXSS

### 后端（待实现）
- **框架**: Java + SpringBoot
- **数据库**: MySQL + Redis
- **AI模块**: TensorFlow（外貌评分）
- **向量检索**: Faiss / Milvus（匹配算法）

### 核心服务
- API网关
- 用户与认证服务
- 问卷与画像服务
- 匹配服务
- 聊天与审核服务
- 支付与订单服务
- 活动服务
- 风控服务
- 文件与AI服务

## 项目结构

```
.
├── docs/                      # 文档目录
│   ├── API接口定义.md         # REST API接口规范
│   ├── 数据库设计.md          # 数据库表结构设计
│   └── 匹配算法设计.md        # 匹配算法详细设计
├── miniprogram/               # 小程序前端代码
│   ├── pages/                 # 页面目录
│   │   ├── auth/              # 认证页面
│   │   ├── match/             # 匹配列表页面
│   │   ├── chat/              # 聊天页面
│   │   └── payment/           # 支付页面
│   ├── app.ts                 # 小程序入口
│   └── app.json               # 小程序配置
├── src/                       # 后端代码（待实现）
│   ├── algorithm/             # 匹配算法
│   │   └── match_algorithm.py
│   └── utils/                 # 工具类
│       ├── encryption.py     # 加密工具
│       └── content_audit.py  # 内容审核
└── README.md                  # 项目说明
```

## 核心页面

### 1. 注册/登录与认证页 (`pages/auth/auth`)
- 微信一键登录 + 手机号绑定
- 角色选择（男大学生/女性）
- 证件上传（学生证/身份证）
- 人脸活体检测
- 进度指示器

### 2. 问卷页 (`pages/questionnaire/questionnaire`)
- 分步表单：基础信息、兴趣偏好、社交需求、价值观、外貌偏好
- 生活照上传
- 保存进度、可回退

### 3. 匹配列表页 (`pages/match/match`)
- 卡片流展示候选人
- 喜欢/略过操作
- 匹配度显示

### 4. 聊天页 (`pages/chat/chat`)
- 站内聊天界面
- 实时内容审核
- 解锁联系方式入口
- 举报/拉黑功能

### 5. 支付解锁页 (`pages/payment/payment`)
- 套餐选择（单次/月度/年度）
- 微信支付集成
- 订单状态查询

## 匹配算法

### 匹配分数计算

综合匹配分数 = 
- 兴趣重合度（40%）+
- 社交需求契合度（30%）+
- 价值观相似度（20%）+
- AI外貌匹配度（10%）+
- 基础匹配加分项（最高10分）

详细算法实现见 `docs/匹配算法设计.md` 和 `src/algorithm/match_algorithm.py`

## 数据库设计

核心数据表：
- `users` - 用户基础信息
- `user_identity` - 身份认证
- `questionnaire` - 问卷数据
- `photos` - 用户照片
- `match_index` - 匹配索引（向量检索）
- `likes` - 喜欢记录
- `matches` - 匹配成功表
- `messages` - 聊天消息
- `orders` - 订单表
- `contact_unlock` - 联系方式解锁

详细表结构见 `docs/数据库设计.md`

## API接口

主要接口分类：
- `/api/auth/*` - 认证相关
- `/api/questionnaire/*` - 问卷相关
- `/api/match/*` - 匹配相关
- `/api/chat/*` - 聊天相关
- `/api/payment/*` - 支付相关
- `/api/activity/*` - 活动相关
- `/api/user/*` - 用户相关

详细接口定义见 `docs/API接口定义.md`

## 安全与合规

### 数据加密
- 敏感字段使用AES-256加密存储
- 传输使用HTTPS/TLS
- 密钥管理使用KMS

### 内容审核
- 实时文本审核（敏感词、联系方式拦截）
- 图片审核（接入第三方服务）
- 违规行为记录与封禁

### 隐私保护
- 数据最小化收集
- 用户可导出/删除数据
- 72小时内彻底清除注销账号数据
- 符合《个人信息保护法》要求

## 开发计划

### Phase 1: MVP开发（4-6周）
- [x] 项目结构搭建
- [x] 核心页面开发
- [x] API接口定义
- [x] 数据库设计
- [x] 匹配算法实现
- [ ] 后端服务开发
- [ ] 微信支付集成
- [ ] 内容审核集成

### Phase 2: 功能增强（2-3周）
- [ ] 活动运营模块
- [ ] AI外貌评分
- [ ] 推送与通知
- [ ] 数据统计分析

### Phase 3: 优化与上线（2-3周）
- [ ] 性能优化
- [ ] 安全加固
- [ ] 合规审查
- [ ] 灰度发布

## 注意事项

1. **合规性**: 确保符合《个人信息保护法》《网络安全法》及微信小程序平台规则
2. **安全性**: 敏感数据加密存储，防止信息泄露
3. **风控**: 严格内容审核，防止违规行为
4. **用户体验**: 保证匹配质量，提升用户满意度

## 联系方式

如有问题或建议，请联系开发团队。

---

**版本**: v1.0.0  
**更新日期**: 2024-01-01
